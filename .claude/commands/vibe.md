# /vibe - 全生命周期开发流程命令

## 命令描述
执行完整的软件开发生命周期流程，确保每个需求或任务都遵循标准化的开发流程，保证文档、代码、测试用例的完整性与一致性。

## 使用方法
```
/vibe <需求描述>
```

## 命令提示词

你现在需要执行 `/vibe` 全生命周期开发流程。请严格按照以下8个阶段的顺序执行，确保每个阶段完成后再进入下一阶段：

**当前需求：** {{requirement}}

**必须严格按照以下顺序执行的完整流程：**

### 1. 需求设计阶段
- 使用TodoWrite工具创建完整的开发任务清单
- 分析并细化需求规格说明，识别功能性和非功能性需求
- 确定验收标准和成功指标
- 分析对现有系统的影响和依赖关系
- 在 `docs/党建管理系统/requirements.md` 中补充或更新需求文档
- 标记当前任务为完成，开始下一阶段

### 2. 架构设计阶段
- 基于需求设计系统架构，确定技术栈和组件划分
- 设计数据流、交互模式和接口规范
- 考虑安全性、扩展性、可维护性
- 在 `docs/党建管理系统/design.md` 中更新架构设计
- 标记当前任务为完成，开始下一阶段

### 3. 系统设计阶段
- 详细设计数据模型、API接口、业务逻辑
- 确定数据库schema变更和迁移策略
- 设计安全策略和性能优化方案
- 完善系统设计文档
- 标记当前任务为完成，开始下一阶段

### 4. 用例设计阶段
- 设计测试用例和测试场景（单元测试、集成测试、UI测试）
- 定义测试数据和测试环境要求
- 设计性能测试和安全测试用例
- 在 `docs/党建管理系统/tests.md` 中更新测试设计
- 在 `docs/党建管理系统/tasks.md` 中更新任务分解
- 标记当前任务为完成，开始下一阶段

### 5. 任务开发阶段
- 根据设计文档实现后端代码（Controller、Service、Repository、Entity层）
- 根据设计文档实现前端代码（页面、组件、状态管理、API调用）
- 确保代码符合现有项目规范和编码标准
- 实现必要的配置和数据库迁移
- 标记当前任务为完成，开始下一阶段

### 6. 单元测试阶段
**后端单元测试：**
- 在 `backend/src/test/java/com/party/` 目录下编写测试
- Service层测试：测试业务逻辑正确性
- Repository层测试：测试数据访问正确性  
- Controller层测试：测试接口逻辑正确性
- 使用Maven运行测试：`mvn test`

**前端单元测试：**
- 在 `frontend/tests/` 目录下编写测试
- Vue组件测试：测试组件渲染和交互
- 状态管理测试：测试Pinia状态逻辑
- 工具函数测试：测试utility函数
- 使用 `npm run test:unit` 运行测试

- 确保测试覆盖率达到80%以上
- 标记当前任务为完成，开始下一阶段

### 7. 接口测试阶段
- 在 `api-tests/` 目录下编写API自动化测试
- 涵盖正常场景、异常场景、边界条件测试
- 验证数据完整性、安全性、性能指标
- 使用Jest框架编写测试用例
- 运行API测试：`cd api-tests && npm test`
- 标记当前任务为完成，开始下一阶段

### 8. UI自动化测试阶段
- 在 `ui-tests/` 目录下编写UI自动化测试
- 使用Playwright编写页面功能测试
- 编写端到端流程测试
- 验证用户交互的完整性和正确性
- 运行UI测试：`cd ui-tests && npm test`
- 生成测试报告并验证通过率
- 标记当前任务为完成

**最终验证要求：**
- 所有单元测试必须通过（后端和前端）
- 所有API测试必须通过
- 所有UI自动化测试必须通过
- 代码覆盖率达到80%以上
- 文档与代码保持完全一致
- 符合现有项目架构和规范

**重要提醒：**
1. 必须使用TodoWrite工具管理整个流程的任务进度
2. 严格按照1→2→3→4→5→6→7→8的顺序执行，不可跳跃
3. 每个阶段完成后必须标记为completed才能进入下一阶段
4. 在开发过程中如遇到问题，优先查阅现有项目文档和代码规范
5. 确保所有产物（文档、代码、测试）的一致性和完整性